"use strict";var astroApp=angular.module("astroApp.controller",["ngResource","ngAnimate","ui.bootstrap","smart-table","angularModalService","angularSpinner","nvd3"]);astroApp.controller("tableListCtrl",function(e){}),astroApp.controller("tableCtrl",["$rootScope","$log","$routeParams","getObservations",function(e,t,o,n){e.displayedObservations=[],e.observations=n.query(),t.debug(e.observations),e.toggleAnimation=function(){e.animationsEnabled=!e.animationsEnabled,e.itemsByPage=15}}]),astroApp.controller("ModalCtrl",["$scope","$uibModal",function(e,t){e.animationsEnabled=!0,e.addObservation=function(){t.open({animation:e.animationsEnabled,templateUrl:"newModalContent.html",controller:"ModalInstanceCtrl"})},e.removeObservation=function(o){t.open({animation:e.animationsEnabled,templateUrl:"removeObservationModal.html",controller:"ModalInstanceRemoveCtrl",resolve:{removePhotometry:function(){return o}}})},e.editObservation=function(o){t.open({animation:e.animationsEnabled,templateUrl:"editObservationModal.html",controller:"ModalInstanceEditCtrl",resolve:{editPhotometry:function(){return o}}})},e.editUPhotometry=function(o){t.open({animation:e.animationsEnabled,templateUrl:"editUPhotometryModal.html",controller:"ModalInstanceEditUPhotometryCtrl",resolve:{editUPhotometry:function(){return o}}})},e.editVPhotometry=function(o){t.open({animation:e.animationsEnabled,templateUrl:"editVPhotometryModal.html",controller:"ModalInstanceEditVPhotometryCtrl",resolve:{editVPhotometry:function(){return o}}})},e.editBPhotometry=function(o){t.open({animation:e.animationsEnabled,templateUrl:"editBPhotometryModal.html",controller:"ModalInstanceEditBPhotometryCtrl",resolve:{editBPhotometry:function(){return o}}})}}]),astroApp.controller("ModalInstanceCtrl",["$scope","$log","$uibModalInstance","postObservation","fileUpload",function(e,t,o,n,a){e.addRow=function(){var t=e.myFile;if(t){var i="http://localhost:5000/fileUpload";a.uploadFileToUrl(t,i)}else var t="No file";var r=e.myFile2;if(r){var i="http://localhost:5000/fileUpload";a.uploadFileToUrl(r,i)}else var r="No file2";var l=e.myFile3;if(l){var i="http://localhost:5000/fileUpload";a.uploadFileToUrl(l,i)}else var l="No file3";n.save({name:e.name,startDate:e.startDate,endDate:e.endDate,uFileName:t.name,vFileName:r.name,bFileName:l.name},function(t){e.message=t.message}),o.dismiss()},e.cancel=function(){o.dismiss("cancel")}}]),astroApp.controller("ModalInstanceRemoveCtrl",["$scope","$log","$uibModalInstance","removeObservation","removePhotometry",function(e,t,o,n,a){e.ob=e.observations,e.cancel=function(){o.dismiss("cancel")},e.remove=function(){return e.removePhotometry=a,t.debug(e.removePhotometry),n.save({id:a},function(t){e.message=t.message}),o.dismiss(),!0}}]),astroApp.controller("ModalInstanceEditCtrl",["$scope","$log","$uibModalInstance","updateObservation","editPhotometry","fileUpload",function(e,t,o,n,a,i){e.ob=e.observations,e.editPhotometry=a,e.changeName=function(){e.name=this.name},e.changeStartDate=function(){e.startDate=this.startDate},e.changeEndDate=function(){e.endDate=this.endDate};for(var r=-1,l=e.ob.length,s=0;l>s;s++)if(e.ob[s].id===a){r=s,t.debug(e.ob[r].name),e.name=e.ob[r].name,e.startDate=e.ob[r].startDate,e.endDate=e.ob[r].endDate;break}e.updateRow=function(){var t=e.myFile;if(t){var a="http://localhost:5000/fileUpload";i.uploadFileToUrl(t,a)}else var t="No file";var l=e.myFile2;if(l){var a="http://localhost:5000/fileUpload";i.uploadFileToUrl(l,a)}else var l="No file2";var s=e.myFile3;if(s){var a="http://localhost:5000/fileUpload";i.uploadFileToUrl(s,a)}else var s="No file3";n.update({id:e.ob[r].id,name:e.name,startDate:e.startDate,endDate:e.endDate,uFileName:t.name,vFileName:l.name,bFileName:s.name},function(t){e.message=t.message}),o.dismiss()},e.cancel=function(){o.dismiss("cancel")},e.editPhotometry=r}]),astroApp.controller("ModalInstanceEditUPhotometryCtrl",["$scope","$log","$uibModalInstance","editUPhotometry",function(e,t,o,n){e.ob=e.observations,e.editUPhotometry=n;for(var a=-1,i=e.ob.length,r=0;i>r;r++)if(e.ob[r].id===n){a=r;break}e.editUPhotometry=a,e.cancel=function(){o.dismiss("cancel")}}]),astroApp.controller("ModalInstanceEditVPhotometryCtrl",function(e,t,o){e.ob=e.observations,e.editVPhotometry=o;for(var n=-1,a=e.ob.length,i=0;a>i;i++)if(e.ob[i].id===o){n=i;break}e.editVPhotometry=n,e.cancel=function(){t.dismiss("cancel")}}),astroApp.controller("ModalInstanceEditBPhotometryCtrl",function(e,t,o){e.ob=e.observations,e.editBPhotometry=o;for(var n=-1,a=e.ob.length,i=0;a>i;i++)if(e.ob[i].id===o){n=i;break}e.editBPhotometry=n,e.cancel=function(){t.dismiss("cancel")}}),astroApp.controller("hrDiagramCtrl",function(e){}),astroApp.controller("cmdCtrl",["$scope","$log","getObservationsHRDiagram",function(e,t,o){function n(){var n=[],a=["circle"];d3.random.normal();return e.observations=o.query(function(o){var i=0;return e.starNames=o[0].starNames,e.bvObservationsDifference=o[0].bvObservationsDifference,e.vObservations=o[0].vObservations,angular.forEach(e.starNames,function(o,r){t.debug(o),n.push({key:o,values:[]}),n[i].values.push({x:e.bvObservationsDifference[i],y:e.vObservations[i],size:2,shape:a[1]}),i++}),e.starNames,n}),n}o.query(function(t){e.XMax=t[0].XMax,e.XMin=t[0].XMin,e.YMax=t[0].YMax,e.YMin=t[0].YMin;var o=["#000000"];return e.options={chart:{type:"scatterChart",height:550,width:600,color:d3.scale.category10().range(o),scatter:{onlyCircles:!0},showLegend:!1,showDistX:!1,showDistY:!1,showXAxis:!0,showYAxis:!0,yDomain:[e.YMax,e.YMin],xDomain:[e.XMin,e.XMax],tooltipContent:function(e){return"<h3>"+e+"</h3>"},duration:350,xAxis:{axisLabel:"B - V",tickFormat:function(e){return d3.format(".02f")(e)},ticks:5},yAxis:{axisLabel:"V",tickFormat:function(e){return d3.format(".02f")(e)},axisLabelDistance:-5,ticks:10},zoom:{enabled:!0,scaleExtent:[1,10],useFixedDomain:!1,useNiceScale:!1,horizontalOff:!1,verticalOff:!1,unzoomEventType:"dblclick.zoom"}}},e.options}),e.data=n(),e.exampleData=e.data}]),astroApp.controller("adminCtrl",function(e){e.message="Admin Panel"}),astroApp.controller("processCtrl",["$scope","usSpinnerService","$rootScope","processData","getProcessedData","$window","$timeout",function(e,t,o,n,a,i,r){e.message="Admin Panel",e.displayedObservations=[],e.observations=a.query(),e.startSpin=function(){e.spinneractive||(t.spin("spinner-1"),n.query(function(t){e.message=t.message})),r(function(){i.location.reload()},5e3)},e.spinneractive=!1,o.$on("us-spinner:spin",function(t,o){e.spinneractive=!0}),o.$on("us-spinner:stop",function(t,o){e.spinneractive=!1})}]),astroApp.controller("mainCtrl",function(e){e.message="Home made HR diagram"});